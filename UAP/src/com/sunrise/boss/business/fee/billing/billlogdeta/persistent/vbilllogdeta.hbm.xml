<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse - Hibernate Tools
-->
<hibernate-mapping>
    <class name="com.sunrise.boss.business.fee.billing.billlogdeta.persistent.VBillLogDetaVO" table="V_IB_WL_RHBILLLOGDETA" >
		<id name="id" type="java.lang.String">
			<column name="ID" />
		</id>
        <property name="validbillcyc" type="java.lang.Long">
            <column name="VALIDBILLCYC" precision="8" scale="0" />
        </property>
        <property name="subphase" type="java.lang.String">
            <column name="SUBPHASE" length="20" />
        </property>
        <property name="sumAmt" type="java.lang.Double">
        	<column name="SUMAMT" precision="20"/>
        </property>
    </class>
    <sql-query name="query.billLogDeta">
    	<return class="com.sunrise.boss.business.fee.billing.billlogdeta.persistent.VBillLogDetaVO"/>
    	select nvl(validbillcyc,:_ne_validbillcyc) ||','|| s.dictid ||','|| sum(nvl(acctamt,0))||','||s.SORTORDER as id,nvl(validbillcyc,:_ne_validbillcyc) as validbillcyc,s.dictid as subphase ,sum(nvl(acctamt,0)) as sumAmt
		from IB_WL_RHBILLLOGDETA r right join SA_DB_DICTITEM s
		on r.subphase=s.dictid
		and validbillcyc=:_ne_validbillcyc
		where GROUPID='ACCT_BALANCE' and DICTID like 'G%'
		group by validbillcyc,s.dictid,s.SORTORDER
		order by s.SORTORDER
    </sql-query>
    
    <sql-query name="query.billValidbillcyc">
   		 SELECT validbillcyc FROM IB_PF_VALIDBILLCYC WHERE STATE= 1 and REGION =:_ne_region and validbillcyc=:_ne_validbillcyc
    </sql-query>
    
</hibernate-mapping>
