<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="com.gmcc.pboss.business.channel.way.WayVO" table="CH_PW_WAY">
<id column="WAYID" name="wayid" type="java.lang.String">
<generator class="assigned"/>
</id>
<property column="WAYNAME" length="256" name="wayname"  type="java.lang.String"/>
<property column="WAYTYPE" length="4" name="waytype"  type="java.lang.String"/>
<property column="WAYSUBTYPE" length="4" name="waysubtype" type="java.lang.String"/>
<property column="CUSTTYPE" length="4" name="custtype" type="java.lang.String"/>
<property column="UPPERWAYID" length="18" name="upperwayid" type="java.lang.String"/>
<property column="BUSICODE" length="10" name="busicode" type="java.lang.String"/>
<property column="COUNTYID" length="14" name="countyid" type="java.lang.String"/>
<property column="CITYID" length="2" name="cityid" type="java.lang.String"/>
<property column="CENTERID" length="1" name="centerid" type="java.lang.String"/>
<property column="CITYLEVEL" length="3" name="citylevel" type="java.lang.Short"/>
<property column="WAYLEVEL" length="3" name="waylevel" type="java.lang.Short"/>
<property column="BCHLEVEL" length="4" name="bchlevel" type="java.lang.String"/>
<property column="FUNCTION" length="255" name="function" type="java.lang.String"/>
<property column="MISCODE" length="12" name="miscode" type="java.lang.String"/>
<property column="WAYSTATE" length="3" name="waystate" type="java.lang.Short"/>
<property column="CREATETIME" length="7" name="createtime" type="java.util.Date"/>
<property column="DISABLETIME" length="7" name="disabletime" type="java.util.Date"/>
<property column="RUNBYSELF" length="4" name="runbyself" type="java.lang.String"/>
<property column="DEPOTDET" length="20" name="depotdet" type="java.lang.String"/>
<property column="ISSHARE" length="32" name="isshare" type="java.lang.String"/>

<property column="SHORTNAME" length="32" name="shortname" type="java.lang.String"/>
<property column="SVBRCHCODE" length="14" name="svbrchcode" type="java.lang.String"/>
<property column="SVCCODE" length="14" name="svccode" type="java.lang.String"/>
<property column="MAREACODE" length="14" name="mareacode" type="java.lang.String"/>
<property column="BUZTYPECODE" length="2" name="buztypecode" type="java.lang.Short"/>
<property column="ADTYPECODE" length="2" name="adtypecode" type="java.lang.Short"/>
<property column="ADDRESS" length="128" name="address" type="java.lang.String"/>
<property column="LOGISCODE" length="18" name="logiscode" type="java.lang.String"/>
<property column="LATITUDE" length="15" name="latitude" type="java.lang.String"/>
<property column="LONGTITUDE" length="15" name="longtitude" type="java.lang.String"/>
<property column="ADACODE" length="18" name="adacode" type="java.lang.String"/>
<property column="WAYMAGCODE" length="18" name="waymagcode" type="java.lang.String"/>
<property column="CATETYPE" length="2" name="catetype" type="java.lang.Short"/>
<property column="FORMTYPE" length="2" name="formtype" type="java.lang.Short"/>
<property column="STARTTIME" name="starttime" type="java.util.Date"/>
<property column="BUZAREA" length="5" name="buzarea" type="java.lang.Long"/>
<property column="MAINLAYER" length="2" name="mainlayer" type="java.lang.Short"/>
<property column="SUBLAYER" length="2" name="sublayer" type="java.lang.Short"/>
<property column="BUZPHONENO" length="14" name="buzphoneno" type="java.lang.String"/>
<property column="COOPERATOR" length="2" name="cooperator" type="java.lang.Short"/>
<property column="ALARMBIZAMOUNT" length="10" name="alarmbizamount" type="java.lang.Integer"/>

<!-- 提升字段 -->
<property column="PRTSOURCE" length="2" name="prtsource" type="java.lang.Long"/>
<property column="ISCONNECTED" length="2" name="isconnected" type="java.lang.Long"/>
<property column="CONNECTTYPE" length="2" name="connecttype" type="java.lang.Long"/>
<property column="RUNMODE" length="2" name="runmode" type="java.lang.Long"/>
<property column="ISCOREWAY" length="2" name="iscoreway" type="java.lang.Long"/>
<property column="STARLEVEL" length="2" name="starlevel" type="java.lang.Long"/>
<property column="PT" length="2" name="pt" type="java.lang.Long"/>
<property column="CHAINHEAD" length="18" name="chainhead" type="java.lang.String"/>
<property column="SIGNSTATUS" length="2" name="signstatus" type="java.lang.Long"/>
<property column="EMPNUMBER" length="4" name="empnumber" type="java.lang.Long"/>
<property column="MAGNUMBER" length="4" name="magnumber" type="java.lang.Long"/>
<property column="TERMINUMBER" length="4" name="terminumber" type="java.lang.Long"/>
<property column="UPDATEDATE" name="updatedate" type="java.util.Date"/>
<property column="ISSTRAITPRD" length="2" name="isstraitprd" type="java.lang.Short"/>
<property column="TAXTYPE" length="2" name="taxtype" type="java.lang.Short"/>
<property column="ISTIETONG" length="2" name="istietong" type="java.lang.Short"/>
<!-- 新增字段 -->
<property column="CALCUMODE" length="3" name="calcumode" type="java.lang.Short"/>
<property column="UNIFORMTIME" length="6" name="uniformtime" type="java.lang.String"/>
<property column="DISTYPE" length="3" name="distype" type="java.lang.Short"/>
<!-- 新增字段 20110415 是否授权网点字段 -->
<property column="checked" length="3" name="checked" type="java.lang.String"/>
<!-- 新增字段 20110804 是否接入空中充值平台字段 -->
<property column="ISKZCZ" length="1" name="isKzcz" type="java.lang.Long"/>
<!-- 新增字段 20110908 星级分层 -->
<property column="STARLEV" length="1" name="starlev" type="java.lang.String"/>

<property column="ISTOP" length="1" name="istop" type="java.lang.String"/>
<!-- 新增字段 20130106 信用等级 -->
<property column="CREDITLEVEL" length="2" name="creditlevel" type="java.lang.String"/>
<!-- 新增字段 20131209 税务资质 -->
<property column="TAXCERTIFICATE" length="3" name="taxcertificate" type="java.lang.Short"/>

<property column="BUZMANAGER" length="64" name="buzmanager" type="java.lang.String"/>
<property column="SUBRUNMODE" length="2" name="subrunmode" type="java.lang.Short"/>
</class>
<sql-query name="getwaybycityid">
<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
select * from ch_pw_way where cityid=:cityid and WAYLEVEL=1
</sql-query>
<!-- 检查是否网点渠道 -->
<sql-query name="checkisnetwork">
<return-scalar column="counts" type="java.lang.Long"/>
select count(*) as counts from CH_PW_WAY WHERE WAYTYPE='AG' AND WAYSUBTYPE='DIS' and waystate=1 and wayid=:basewayid
</sql-query>
<sql-query name="querynetwork">
<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
Select * from common.ch_pw_way 
where waytype='AG' and (waysubtype= 'PSAL' or waysubtype = 'SAGT') and chainhead=:basewayid and waystate=1
</sql-query>

<sql-query name="queryUpperWaysAndMeByIdOrName">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
	select *
	  from (select *
	          from ch_pw_way way
	         where way.waystate = :waystate
	            or way.waystate = 1 and (way.waytype &lt;&gt; 'RIVL'))
	 start with wayid like :idorname
	         or wayname like :idorname
	connect by prior upperwayid = wayid
</sql-query>

<sql-query name="boss.cms.queryWayByUser">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
      select * from ch_pw_way where waytype='AG' connect by prior wayid=upperwayid start with wayid =:basewayid
</sql-query>

<sql-query name="boss.cms.queryRvwaycnt">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
      select * from ch_pw_way where 1=1
</sql-query>

<sql-query name="boss.cms.querySvwayinfo">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
     select * from ch_pw_way where 1=1 connect by prior wayid=upperwayid start with wayid =:basewayid
</sql-query>
<sql-query name="boss.cms.querySvwayinfo.withwaystate">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
     select * from ch_pw_way where 1=1 and (waystate = 1 or waystate = 0) connect by prior wayid=upperwayid start with wayid =:basewayid
</sql-query>	
<sql-query name="boss.cms.queryAllUpperWays">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
     select * from ch_pw_way where 1=1 connect by prior upperwayid=wayid start with wayid =:basewayid
</sql-query>

<sql-query name="boss.cms.queryUpperWayidNum">
<return class="com.gmcc.pboss.business.channel.way.WayVO"/>  
	select * from ch_pw_way where waytype='ET' and wayid in (select wayid from ch_pw_way start with wayid=:basewayid connect by prior   wayid   = upperwayid) and wayid=:wayid
</sql-query>
<sql-query name="boss.cms.querySaleway">
<return class="com.gmcc.pboss.business.channel.way.WayVO"/> 
select s.*,b.BUSCNO,b.WAYMOD,b.REWARDKIND from (
select a.*   from ch_pw_way a
 where (waysubtype = 'PSAL' or waysubtype = 'SAGT' or waysubtype = 'FD' or waysubtype = 'FDS'  
 or waysubtype = 'VWAY' or waysubtype = 'JMQD' or waysubtype is null or waysubtype = '') 
and waytype='AG' 
 start with a.wayid = :basewayid
connect by prior a.wayid = upperwayid
) s 
left join CH_PW_WAYBUSICIRCLE b on s.wayid = b.wayid
</sql-query>
<sql-query name="boss.cms.querySubSaleway">
<return class="com.gmcc.pboss.business.channel.way.WayVO"/> 
select *
  from ch_pw_way
 where waytype='AG' 
 start with wayid = :basewayid
connect by prior wayid = upperwayid
</sql-query>
<sql-query name="boss.cms.querySharedUpperWay">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>  
		select * from ch_pw_way where isshare = 1 or wayid =:wayid connect by prior upperwayid = wayid start with wayid=:wayid
</sql-query>
<sql-query name="boss.cms.queryAllSubWay">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>  
		select * from ch_pw_way connect by prior wayid = upperwayid start with wayid=:basewayid
</sql-query>
<!--根据地市ID,渠道类型查询所有渠道的信息-->
<sql-query name="com.gmcc.pboss.business.channel.way.QueryWayByCityidAndTypet">
<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
	    select * from CH_PW_WAY w where w.waytype=:waytype and w.cityid=:cityid
</sql-query>
<sql-query name="boss.cms.querySvwayinfoSubWay">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
        select * from ch_pw_way where 1=1 connect by prior wayid=upperwayid start with wayid =:basewayid
</sql-query>
<sql-query name="pboss.channel.queryWayinfoForapplyway">
<!--授权网点申请管理选择申请网点，申请类型为准入申请的时候，查询渠道表限制条件 -->
<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
	select * from ch_pw_way where waystate=1 and cityid=:cityid and (checked='N' or checked is null) and waytype='AG' and waysubtype in ('SAGT','PSAL','FD','FDS','VWAY','JMQD')
</sql-query>
<!--授权网点申请管理选择申请网点，申请类型为退出申请的时候，查询渠道表的限制条件-->
<sql-query name="pboss.channel.queryWayinfoForExitway">
	select * from ch_pw_way where cityid=:cityid and checked='Y' and waytype='AG' and waysubtype in ('SAGT','PSAL','FD','FDS','VWAY','JMQD')
</sql-query>
<sql-query name="pboss.channel.business.channel.way.CheckWayState">
        select * from ch_pw_way where  waystate='1' and waytype='AG' and waysubtype in ('SAGT','PSAL','FD','FDS','VWAY','JMQD')
</sql-query>
<!-- 省级核心连锁查询 -->
<sql-query name="pboss.channel.business.channel.way.QueryWayType">
<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
     select a.* from ch_pw_way a,ch_pw_way b,ch_pw_way c where a.chainhead=b.wayid and b.chainhead=c.wayid and a.wayid=:wayid
</sql-query>
<sql-query name="queryQueryRangeAll">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
	select * from ch_pw_way where checked='Y' and cityid = :cityid
</sql-query>

<sql-query name="pboss.channel.queryImpWayinfo">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
	select * from ch_pw_way where 1=1 connect by prior wayid=upperwayid start with wayid =:basewayid
</sql-query>
<sql-query name="pboss.channel.queryFinanceWayinfo">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
	select * from ch_pw_way where waytype='EC' and waysubtype in ('BKZD','BKPR')
</sql-query>
<sql-query name="pboss.channel.queryNetWayinfo">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
	select * from ch_pw_way where waytype='EC' and waysubtype='NET'
</sql-query>

<!--根据地市ID ，查询该地市和省的编码 -->
<sql-query name="pboss.channel.queryWayIdByCityId">
	<return class="com.gmcc.pboss.business.channel.way.WayVO"/>
	SELECT W.WAYID FROM CH_PW_WAY W WHERE W.CITYID = :cityid OR CITYID = 'GD' ORDER BY W.WAYID
</sql-query>
</hibernate-mapping>
