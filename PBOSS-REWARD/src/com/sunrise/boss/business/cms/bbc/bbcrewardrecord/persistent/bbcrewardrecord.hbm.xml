<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
    <class name="com.sunrise.boss.business.cms.bbc.bbcrewardrecord.persistent.BbcRewardrecordVO" table="V_CH_BBC_REWARDRECORD">
        <id name="rewardlistid" type="java.lang.Long">
            <column name="REWARDLISTID" precision="14" scale="0" />
            <generator class="assigned" />
        </id>
        <property column="OPNID" length="18" name="opnid" type="java.lang.String" />
        <property column="WAYID" length="18" name="wayid" type="java.lang.String" />
        <property column="WAYNAME" length="256" name="wayname" type="java.lang.String" />
        <property column="COUNTYCOMPNAME" length="64" name="countycompname" type="java.lang.String" />
        <property column="STARLEVEL" length="2" name="starlevel" type="java.lang.Long" />
        <property column="WAYOPRCODE" length="18" name="wayoprcode" type="java.lang.String" />
        <property column="REWARDID" length="14" name="rewardid" type="java.lang.Long" />
        <property column="REWARDTYPE" length="3" name="rewardtype" type="java.lang.Long" />
        <property column="REWARDSTD" length="14" name="rewardstd" type="java.lang.Double" />
        <property column="REWARDMONTH" length="6" name="rewardmonth" type="java.lang.String" />
        <property column="NONCYC" length="3" name="noncyc" type="java.lang.Long" />
        <property column="OPRTIME" length="6" name="oprtime" type="java.util.Date" />
        <property column="TOTALSUM" length="12" name="totalsum" type="java.lang.Double" />
        <property column="RUNTIME" length="7" name="runtime" type="java.util.Date" />
        <property column="OSSRC" length="3" name="ossrc" type="java.lang.Integer" />
        <property column="MOBILE" length="15" name="mobile" type="java.lang.String" />
        <property column="BATCHNO" length="18" name="batchno" type="java.lang.String" />
    </class>
<sql-query name="bbcRewardrecordQuery">
<return	class="com.sunrise.boss.business.cms.bbc.bbcrewardrecord.persistent.BbcRewardrecordVO" />
	select REWARDLISTID,OPNID,WAYID,
		 CASE
           WHEN OSSRC = 0 THEN
            (select wayname from CH_PW_WAY where wayid = R.wayid)
           WHEN OSSRC = 1 OR OSSRC = 2 THEN
            (select wayname from CH_BBC_NASWAY where wayid = R.wayid)
         END as wayname,
		(select cny.countycompname from CH_PW_WAY way,CH_PW_CNTYCOMPANY cny where way.wayid=R.wayid 
		and cny.COUNTYCOMPID=way.COUNTYID and rownum=1) as countycompname,
		(select starlevel from CH_PW_WAY where  wayid=R.wayid) as starlevel,
		WAYOPRCODE,REWARDID,REWARDSTD,REWARDTYPE,REWARDMONTH,noncyc,oprtime,TOTALSUM,RUNTIME,OSSRC,MOBILE,BATCHNO
	from CH_BBC_REWARDRECORD R
</sql-query>
</hibernate-mapping>
