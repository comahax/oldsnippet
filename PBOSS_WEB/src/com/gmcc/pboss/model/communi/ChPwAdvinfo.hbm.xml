<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
    <class name="com.gmcc.pboss.model.communi.ChPwAdvinfo" table="CH_PW_ADVINFO">
        <id name="advinfoid" type="java.lang.Long">
            <column name="ADVINFOID" precision="14" scale="0" />
            <generator class="sequence">
			<param name="sequence">CH_PW_ADVINFO_SEQ</param>
			</generator>
        </id>
        <property name="title" type="java.lang.String">
            <column name="TITLE" length="256" />
        </property>
        <property name="content" type="text">
            <column name="CONTENT" />
        </property>
        <property name="type" type="java.lang.Long">
            <column name="TYPE" precision="3" scale="0" />
        </property>
        <property name="releasetime" type="java.util.Date">
            <column name="RELEASETIME" length="7" />
        </property>
        <property name="plantime" type="java.util.Date">
            <column name="PLANTIME" length="7" />
        </property>
        <property name="enddate" type="java.util.Date">
            <column name="ENDDATE" length="7" />
        </property>
        <property name="desttype" type="java.lang.Long">
            <column name="DESTTYPE" precision="3" scale="0" />
        </property>
        <property name="smsnotify" type="java.lang.Long">
            <column name="SMSNOTIFY" precision="2" scale="0" />
        </property>
        <property name="ndapproval" type="java.lang.Long">
            <column name="NDAPPROVAL" precision="2" scale="0" />
        </property>
        <property name="oprcode" type="java.lang.String">
            <column name="OPRCODE" length="18" />
        </property>
        <property name="state" type="java.lang.Long">
            <column name="STATE" precision="3" scale="0" />
        </property>
        <property name="imgLogoPath" type="java.lang.String">
            <column name="IMGLOGOPATH" length="256" />
        </property>
        <property name="url" type="java.lang.String">
            <column name="URL" length="512" />
        </property>
        <set name="rcvObjs" table="CH_PW_RCVOBJ" lazy="true" 
             inverse="true" cascade="none">
        	<key column="ADVINFOID"></key>
        	<one-to-many class="com.gmcc.pboss.model.communi.ChPwRcvobj"/>
        </set>
        <set name="affixs" table="CH_PW_ADVAFFIX" lazy="true" 
        	inverse="true" >
        	<key column="ADVINFOID"></key>
        	<one-to-many class="com.gmcc.pboss.model.communi.ChPwAdvaffix"/>
        </set>
    </class>
    <!-- 获取地市沟通平台中的公开信息 -->
    <query name="com.gmcc.pboss.model.communi.queryCityPublicInfo">
		Select info 
		from ChPwAdvinfo info left outer join fetch info.affixs 
		where info.type=1 and info.desttype=1 and info.state = 3
		and info.enddate >= :curDate order by info.releasetime desc
    </query>
</hibernate-mapping>
